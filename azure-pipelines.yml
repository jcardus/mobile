# Xcode
trigger:
- mobile-dev

pool:
  vmImage: 'macos-latest'

steps:
- task: DownloadSecureFile@1
  name: caCertificate
  displayName: 'Download CA certificate'
  inputs:
    secureFile: 'azuredevops.mobileprovision'

- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      echo Installing $(caCertificate.secureFilePath) to the trusted CA directory...
      sudo chown root:root $(caCertificate.secureFilePath)
      sudo chmod a+r $(caCertificate.secureFilePath)
      sudo ln -s -t /etc/ssl/certs/ $(caCertificate.secureFilePath)
      # Write your commands here
      npm install
      npm run-script deploy:ios:localizalia:beta
      
